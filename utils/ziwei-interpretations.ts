// Map of "StarName_PalaceName" to Interpretation Text
// Palace Names match the standard: 命宮, 兄弟, 夫妻, 子女, 財帛, 疾厄, 遷移, 交友, 官祿, 田宅, 福德, 父母

const INTERPRETATIONS: Record<string, string> = {
    // === 武曲 Wu Qu ===
    '武曲_命宮': `武曲於命宮：武曲之特色為個性剛毅、保守，重義氣、循規蹈矩、誠實守信、心性直爽、執行力強、勇敢，更具開創力。有孤寡的味道，其人勞碌，亦常會有情緒性的孤獨感。是位能夠創造新奇的點子王。武曲也具有不服輸的特質，因為屬於內斂而剛的性質，所以學藝較能專精。易對宗教、信仰、哲學感興趣，也較常人有敏銳的第六感。武曲對四化格外敏感，無論在任何宮位都會產生明顯的影響力。武曲屬金，努力工作就能擁有財庫。武曲身材中高紮實（雙骨），頭闊大，顎骨突，面長圓，聲較嫩且宏亮。武曲守命主遲發，故多白手興家。義無反顧，比較弧高，目光遠大，向外發展，有定力，耐力，少言重諾。強而不悍：做完先講，果敢善理財。宜：軍政、警、武職、財經、炒賣。財得財失皆突然。
◎因武曲於寅，與天相同宮，武曲是財星，天相印星，兩者皆衣祿之神，故不愁吃穿，不會很窮，而好酒色。但武曲為將星，較剛直，天相印星，故主觀強，榮譽心強而有志氣謀略，較不服輸的個性，反應快，事業心強，因此坐紫微於事業宮，是最好的官祿主，加本命武曲將星，天相印星， 故定喜做大事，財帛宮廉府為聚財之星，福德宮七殺頭腦好。個性墾持重，處事謹慎，厚重溫良，性溫和而主觀及獨立性，有才藝，及不服輸而愛面子之個性，故做事皆謹言慎行，靜靜的做，所行之事沒成功的話，會有家醜不外揚之心態，故會讓人有神祕感，故成功時會有衣錦榮華而發財還鄉，但亦有幽默感及正義感而樂於助人，學問淵博，多學而能，或精打細算之覺智，性耿直，外表雖堅強，而內心柔弱，多向外發展，喜掌權而獨斷獨行，脾氣有時會躁，婚姻難完美。`,

    // Placeholder for others - can be expanded
    '紫微_命宮': '紫微星坐命宮：紫微星為帝王之星，坐命者氣質尊貴，有領導才能。性格穩重，處事周全，但有時流於主觀。喜見左輔、右弼，則能發揮統領群倫之才。',
    '天機_命宮': '天機星坐命宮：天機為智慧之星，坐命者反應敏捷，足智多謀，善於分析策劃。心地善良，但心思較為變動，易鑽牛角尖。適合從事腦力密集之工作。',
    '太陽_命宮': '太陽星坐命宮：太陽為官祿主，主貴。坐命者個性熱情直爽，樂於助人，光明磊落。如太陽旺廟，則前途似錦；落陷則較勞心勞力。',
    '天同_命宮': '天同星坐命宮：天同為福星，坐命者性情溫和，樂知天命，不與人爭。雖較被動，但在逆境中常有貴人相助，晚運佳。',
    '廉貞_命宮': '廉貞星坐命宮：廉貞為次桃花，性格複雜多變，好強好勝，標新立異。在公關、交際方面有天賦。視星曜組合可為權威或囚星。',
    '天府_命宮': '天府星坐命宮：天府為庫星，性格穩重寬厚，善於守成與管理。具有包容力，但也較保守谨慎，不喜冒險。',
    '太陰_命宮': '太陰星坐命宮：太陰為財星、田宅主。個性溫柔細膩，重感情，有藝術氣息。男命太陰較柔，女命太陰較具女性美。',
    '貪狼_命宮': '貪狼星坐命宮：貪狼為桃花星，多才多藝，擅長交際應酬。性格圓滑，慾望較強，對新奇事物有濃厚興趣。',
    '巨門_命宮': '巨門星坐命宮：巨門主口舌，能言善道，觀察入微。適合從事以口才為主的行業。但個性較多疑，易惹是非。',
    '天相_命宮': '天相星坐命宮：天相為印星，性格正義，也就是熱心助人，重視形象。適合擔任幕僚或主要管理職，處事公正。',
    '天梁_命宮': '天梁星坐命宮：天梁為蔭星，主壽。個性清高，穩重慈悲，喜照顧他人。有逢凶化吉之能，但人生早年可能較多波折。',
    '七殺_命宮': '七殺星坐命宮：七殺為將星，個性剛毅果決，勇於開創，不畏艱難。一生起伏較大，成敗往往在一線之間。',
    '破軍_命宮': '破軍星坐命宮：破軍主耗，代表破舊立新。個性衝動，喜新厭舊，開創力極強，不喜受約束。人生變動幅度大。',
};

// Generic generator for missing entries
function getGenericInterpretation(star: string, palace: string): string {
    const starTraits: Record<string, string> = {
        // Major
        '紫微': '尊貴、領導、統御',
        '天機': '智慧、變動、策劃',
        '太陽': '熱情、博愛、奔波',
        '武曲': '剛毅、執行、財富',
        '天同': '溫和、享樂、被動',
        '廉貞': '公關、是非、才藝',
        '天府': '穩重、守成、庫藏',
        '太陰': '溫柔、財富、不動產',
        '貪狼': '慾望、才藝、交際',
        '巨門': '口舌、是非、研究',
        '天相': '服務、形象、協調',
        '天梁': '蔭庇、長者、原則',
        '七殺': '肅殺、開創、衝動',
        '破軍': '破壞、突破、變動',

        // Lucky (Six Lucky + Lu Cun + Tian Ma)
        '左輔': '輔佐、助力、踏實',
        '右弼': '輔佐、機智、人緣',
        '天魁': '貴人、機遇、提拔 (陽貴)',
        '天鉞': '貴人、機遇、提拔 (陰貴)',
        '文昌': '科甲、才華、正規學術',
        '文曲': '才藝、口才、非正統才藝',
        '祿存': '財庫、解厄、保守',
        '天馬': '變動、奔波、外向',

        // Sha (Six Sha)
        '擎羊': '刑傷、剛烈、競爭',
        '陀羅': '拖延、糾纏、暗晦',
        '火星': '爆發、剛烈、突發',
        '鈴星': '隱忍、計算、發聲',
        '地空': '空亡、幻想、破財',
        '地劫': '劫財、波動、得失',

        // Peach
        '紅鸞': '喜慶、人緣、早婚',
        '天喜': '喜慶、開心、生育',
        '咸池': '桃花、情慾、豔遇',
        '天姚': '風流、交際、魅力',

        // Others (Partial list)
        '孤辰': '孤獨、獨立 (男命忌)',
        '寡宿': '孤獨、隔閡 (女命忌)',
        '天刑': '刑法、自律、孤剋',
        '陰煞': '小人、暗算、業力',
        '破碎': '損耗、不全',
        '天哭': '憂傷、情緒',
        '天虛': '虛浮、不實',
        '龍池': '才藝、品味',
        '鳳閣': '才藝、美感'
    };

    const palaceTraits: Record<string, string> = {
        '命宮': '個性特質與運勢總樞',
        '兄弟': '手足關係與資金周轉',
        '夫妻': '感情模式與配偶類型',
        '子女': '親子關係與桃花位',
        '財帛': '理財觀念與進財方式',
        '疾厄': '身體體質與潛在疾病',
        '遷移': '外出運勢與人際面相',
        '交友': '朋友互動與部屬關係',
        '官祿': '工作態度與事業傾向',
        '田宅': '居住環境與資產累積',
        '福德': '精神享受與興趣嗜好',
        '父母': '長輩緣分與遺傳基因'
    };

    const s = starTraits[star];
    const p = palaceTraits[palace.replace('宮', '')] || palaceTraits[palace];

    if (s && p) {
        return `${star}星入${palace}：${star}代表${s}，在${palace}則影響${p}。具體影響需視整體格局與四化而定。`;
    }
    return '';
}

export function getStarInterpretation(starName: string, palaceName: string): string {
    // Normalize palace name (e.g. 官祿宮 -> 官祿) if needed, but assuming full match first
    // Our keys use '命宮' but others might be '兄弟'.
    // Let's normalize key construction.

    // Ensure palace name matches our key convention (usually 2 chars except 命宮)
    // Actually ZiWeiChart uses full names usually (命宮, 兄弟, etc from ziwei-limits.ts PALACE_ORDER)
    // PALACE_ORDER = ['命宮', '兄弟', '夫妻', '子女', '財帛', '疾厄', '遷移', '交友', '官祿', '田宅', '福德', '父母']

    const key = `${starName}_${palaceName}`;
    if (INTERPRETATIONS[key]) {
        return INTERPRETATIONS[key];
    }

    return getGenericInterpretation(starName, palaceName);
}
